<div class="row col-md-12">
  <h2>{{getPageTag()}}</h2>   
</div>
<div class="row">
<div class="col-xs-6 col-sm-3">
  <section class="prev" ng-repeat="key in ratings" ng-hide="key.previous.id == null">
    <div class="image-container">
    <img ng-src="{{key.previous.file_name_medium}}" class="img-rounded img-responsive" ng-if="key.previous.type === 'image'">
    <img ng-src="https://i1.ytimg.com/vi/{{key.previous.original_file_name}}/hqdefault.jpg" class="img-rounded img-responsive" ng-if="key.previous.type === 'video'">
    <h2><span><i class="fa fa-thumbs-up"></i> {{key.previous.overallScore}}</span></h2>
    </div>
  </section>

  <section class="categories hidden-xs" ng-controller="tagPopularCtrl">
    <h3><i class="glyphicon glyphicon-fire"></i> Popular tags</h3>
    <ul class="tags" ng-repeat="(key, tagCloud) in tagCloud">
      <li ng-repeat="key in tagCloud.tagCloud" class="{{roundTagColor(key.count,tagCloud.minCount,tagCloud.maxCount)}} grow"><a href="#!/rate/tag/{{key.tag}}"><span style="font-size:144%">{{key.tag}}</span></a></li>
    </ul>
    <a href="#!/tagsearch">More...</a>
  </section>


    <section class="categories hidden-xs" ng-controller="tagRecentCtrl">
      <h3><i class="glyphicon glyphicon-send"></i> Recent tags</h3>
      <ul class="tags" ng-repeat="(key, tagCloud) in tagCloud">
        <li ng-repeat="key in tagCloud.tagCloud" class="{{roundTagColor(key.count,tagCloud.minCount,tagCloud.maxCount)}} grow"><a href="#!/rate/tag/{{key.tag}}"><span style="font-size:144%">{{key.tag}}</span></a></li>
      </ul>
      <a href="#!/tagsearch">More...</a>
    </section>

</div>

<div class="col-xs-6 col-sm-3 col-sm-push-6" ng-repeat="key in ratings">
  <section class="next">
  <div class="image-container">
    <img ng-src="{{key.next.file_name_medium}}" class="img-rounded img-responsive" ng-if="key.next.type === 'image'"  ng-hide="key.next.type === 'end'">
    <img ng-src="https://i1.ytimg.com/vi/{{key.next.original_file_name}}/hqdefault.jpg" class="img-rounded img-responsive" ng-if="key.next.type === 'video'"  ng-hide="key.next.type === 'end'">
    <h2 class="next" ng-hide="key.next.type === 'end'"><span>Next...</span></h2>
    <img src="/public/img/end.png" class="img-rounded img-responsive" ng-if="key.next.type === 'end'">
    <h2 class="next" ng-if="key.next.type === 'end'"><span>No more in {{getPageTag()}}</span></h2>
  </div>
  </section>


        <section class="categories hidden-xs" ng-controller="tagPopularCtrl">
    <h3><i class="fa fa-trophy"></i> Top 20 in</h3>
    <ul class="tags" ng-repeat="(key, tagCloud) in tagCloud">
      <li ng-repeat="key in tagCloud.tagCloud | orderBy:key.count:reverse" class="{{roundTagColor(key.count,tagCloud.minCount,tagCloud.maxCount)}} grow"><a href="#!/top/{{getPageType()}}/{{key.tag}}"><span style="font-size:144%">{{key.tag}}</span></a></li>
    </ul>
  </section>
</div>

<div class="col-xs-12 col-sm-6 col-sm-pull-3" ng-repeat="key in ratings">
  <section class="current">
        <img ng-src="{{key.current.file_name}}" class="img-rounded img-responsive" ng-if="key.current.type === 'image'">
        <youtube code="{{key.current.original_file_name}}" ng-if="key.current.type === 'video'"></youtube>
            <div class="rating">
              <div style="text-align:center; margin: 20px 0">
                <button id="like" class="btn btn-primary" popover-placement="bottom" popover="I like it"  popover-trigger="mouseenter" ng-click ="getValue(1, key.previous.id, key.current.id, key.next.id)"><i class="fa fa-thumbs-up"></i></button>
                <button id="likelot" class="btn btn-primary" popover-placement="bottom" popover="I like it alot"  popover-trigger="mouseenter" ng-click ="getValue(2, key.previous.id, key.current.id, key.next.id)"><i class="fa fa-star"></i></button>
                <button id="love" class="btn btn-primary" popover-placement="bottom" popover="I love it"  popover-trigger="mouseenter" ng-click ="getValue(3, key.previous.id, key.current.id, key.next.id)"><i class="fa fa-heart"></i></button>
                <button id="next" class="btn btn-primary" popover-placement="bottom" popover="Meh"  popover-trigger="mouseenter" ng-click ="getValue(0, key.previous.id, key.current.id, key.next.id)"><i class="fa fa-arrow-right" ></i></button>
                </div>
              </div>          
              <div class="caption">
                <a href="#!/rate/user/{{key.current.userid}}"><img gravatar-src="'{{key.current.gravatar}}'" class="profileThumb"></a>
                <a href="#!/rate/user/{{key.current.userid}}" class="user-link">{{key.current.userid}}</a> 
                <h3>{{key.current.title}}</h3>
                <p>{{key.current.description}}</p>

               <!-- Likes: {{key.current.overallScore}} -->
                <ul class="tags">
                  <li ng-repeat="(key, value) in key.current.tags"><span class="label label-primary"><a href="#!/rate/tag/{{value}}">{{value}}</a></span></li>
                </ul>   
              </div> 
  </section>
      <div class="buttons pull-left">
      <a href="#!/upload" class="btn btn-lg btn-primary"><span class="glyphicon glyphicon-plus"></span>&nbsp;Upload</a>
      <a href="#!/top/{{getPageType()}}/{{getPageTag()}}" class="btn btn-lg btn-primary"><span class="fa fa-heart"></span>&nbsp;Top 20 in {{getPageTag()}}</a>
    </div>
</div>

<div class="col-xs-12 visible-xs">
      <section class="categories" ng-controller="tagPopularCtrl">
      <h3><i class="glyphicon glyphicon-fire"></i> Popular tags</h3>
      <ul class="tags" ng-repeat="(key, tagCloud) in tagCloud">
        <li ng-repeat="key in tagCloud.tagCloud" class="{{roundTagColor(key.count,tagCloud.minCount,tagCloud.maxCount)}}"><a href="#!/rate/tag/{{key.tag}}"><span style="font-size:{{roundFontSize(key.count,tagCloud.minCount,tagCloud.maxCount)}}%">{{key.tag}}</span></a></li>
      </ul>
      <a href="#!/tagsearch">More...</a>
      </section>

        <section class="categories" ng-controller="tagRecentCtrl">
      <h3><i class="glyphicon glyphicon-send"></i> Recent tags</h3>
      <ul class="tags" ng-repeat="(key, tagCloud) in tagCloud">
        <li ng-repeat="key in tagCloud.tagCloud" class="{{roundTagColor(key.count,tagCloud.minCount,tagCloud.maxCount)}}"><a href="#!/rate/tag/{{key.tag}}"><span style="font-size:{{roundFontSize(key.count,tagCloud.minCount,tagCloud.maxCount)}}%">{{key.tag}}</span></a></li>
      </ul>
      <a href="#!/tagsearch">More...</a>
  </section>


</div>

</div>